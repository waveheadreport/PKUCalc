<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PKU Calculator</title>
  <style>
      .collapsible {
      background-color: #777;
      color: white;
      cursor: pointer;
      padding: 18px;
      width: 100%;
      border: none;
      text-align: left;
      outline: none;
      font-size: 15px;
     }
        
     .active, .collapsible:hover {
       background-color: #555;
     }
        
     .content {
       padding: 0 18px;
       display: none;
       overflow: hidden;
       background-color: #f1f1f1;
      }
  </style>
</head>
<body>
  <h1>PKU Protein Calculator</h1>
  <div>
    <label for="dailyProteinGoal">Daily Protein Goal (grams):</label>
    <input type="number" id="dailyProteinGoal" name="dailyProteinGoal">
  </div>
  <div>
    <label for="totalProtein">Total Protein:</label>
    <input type="number" id="totalProtein" name="totalProtein">
  </div>
  <div>
    <label for="mealWeight">Meal Weight (grams):</label>
    <input type="number" id="mealWeight" name="mealWeight">
  </div>
  <div>
    <label for="finishedMealWeight">Finished Meal Weight (grams):</label>
    <input type="number" id="finishedMealWeight" name="finishedMealWeight">
  </div>
  <button onclick="calculateProtein()">Calculate Protein Intake</button>

  <div>
    <h2>Protein Intake Today:</h2>
    <ul id="proteinEaten"></ul>
	<h2>Total Protein Eaten Today: <span id="totalProteinEaten"></span> grams</h2>
	<h2>Difference from Daily Goal: <span id="differenceFromGoal"></span> grams</h2>
	<h2>Grams of whole milk: <span id="gramsOfMilk"></span></h2>
  </div>

  <script>
    function calculateProtein() {
	  const dailyProteinGoal = parseFloat(document.getElementById("dailyProteinGoal").value);
      const totalProtein = parseFloat(document.getElementById("totalProtein").value);
      const mealWeight = parseFloat(document.getElementById("mealWeight").value);
      const finishedMealWeight = parseFloat(document.getElementById("finishedMealWeight").value);

      const proteinEaten = ((mealWeight-finishedMealWeight)/mealWeight)*(totalProtein);
      const proteinIntakeData = JSON.parse(localStorage.getItem("proteinIntakeData")) || {};
      const date = new Date().toLocaleDateString();

      if (!proteinIntakeData[date]) {
        proteinIntakeData[date] = [];
      }

      proteinIntakeData[date].push(proteinEaten);
      localStorage.setItem("proteinIntakeData", JSON.stringify(proteinIntakeData));
      displayProteinIntake();
    }

    function displayProteinIntake() {
      const proteinIntakeData = JSON.parse(localStorage.getItem("proteinIntakeData")) || {};
      const date = new Date().toLocaleDateString();
      const proteinEaten = proteinIntakeData[date] || [];

      const proteinEatenList = document.getElementById("proteinEaten");
      proteinEatenList.innerHTML = "";
	  
	  let totalProteinEaten = 0;
      proteinEaten.forEach(function(protein) {
        const listItem = document.createElement("li");
        listItem.textContent = protein;
        proteinEatenList.appendChild(listItem);
		totalProteinEaten += protein;
      });
	  
	  const totalProteinEatenDisplay = document.getElementById("totalProteinEaten");
      totalProteinEatenDisplay.textContent = totalProteinEaten.toFixed(2);
	  
	  const dailyProteinGoal = parseFloat(document.getElementById("dailyProteinGoal").value);
      const differenceFromGoalDisplay = document.getElementById("differenceFromGoal");
	  const differenceFromGoal = dailyProteinGoal - totalProteinEaten;
      differenceFromGoalDisplay.textContent = differenceFromGoal.toFixed(2);
	  const gramsOfMilkDisplay = document.getElementById("gramsOfMilk");
	  const gramsOfMilk = (differenceFromGoal * 32).toFixed(2);
	  gramsOfMilkDisplay.textContent = `${gramsOfMilk} grams of whole milk`;
    }
	
	/*const dailyProteinGoalInput = document.getElementById("dailyProteinGoal");
    dailyProteinGoalInput.addEventListener("input", function() {
	  const dailyProteinGoal = parseFloat(this.value);
      displayProteinIntake(dailyProteinGoal);
	});*/
	
    displayProteinIntake();
  </script>
</body>
</html>
